<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Student & Mentor Management</title>
    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.datatables.net/1.10.24/css/jquery.dataTables.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        padding-top: 56px;
      }
      .sidebar {
        position: fixed;
        top: 56px;
        bottom: 0;
        left: 0;
        z-index: 100;
        height: 100%;
        width: 250px;
        background-color: #f8f9fa;
        color: #000;
        padding: 15px;
        border-right: 1px solid #ddd;
      }
      .sidebar img {
        width: 100%;
        margin-bottom: 15px;
      }
      .content {
        margin-left: 250px;
        padding: 20px;
      }
      .table-container {
        overflow-x: auto;
      }
      .table th,
      .table td {
        text-align: center;
        font-size: 0.85rem;
      }
      .table {
        font-size: 0.85rem;
      }
      .nav-tabs .nav-link {
        border: 1px solid #ddd;
        border-radius: 0;
      }
      .nav-tabs .nav-link.active {
        border-color: #ddd #ddd transparent;
      }
      .tab-content {
        padding: 15px;
      }
      .intro-container {
        margin-bottom: 30px;
      }
      .intro-container h2 {
        margin-bottom: 15px;
      }
      .intro-container p {
        font-size: 1rem;
        margin-bottom: 15px;
      }
      .intro-container a {
        color: #007bff;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
      <a class="navbar-brand" href="#">Project 20-Thirty</a>
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item active">
            <a class="nav-link" href="#">Dashboard</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Students</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Mentors</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Assessments</a>
          </li>
        </ul>
      </div>
    </nav>

    <div class="sidebar">
      <img src="/static/logo-white.png" alt="Logo" />
      <h4>Navigation</h4>
      <ul class="nav flex-column">
        <li class="nav-item">
          <a class="nav-link active" href="#" onclick="showDirectories()"
            >Directories</a
          >
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" onclick="showAssessments()"
            >Assessments</a
          >
        </li>
      </ul>
    </div>

    <div class="content">
      <!-- Directories Tab -->
      <div id="directories" class="tab-content">
        <div class="intro-container">
          <h2>Directories</h2>
          <p>
            Welcome to the Directories section where you can manage and view the
            details of students and mentors. This section is designed to help
            you keep track of all the important information efficiently.
          </p>
          <p>
            For more details on how to use this feature, refer to the
            <a href="/docs/directories" target="_blank">documentation</a>.
          </p>
        </div>
        <ul class="nav nav-tabs">
          <li class="nav-item">
            <a
              class="nav-link active"
              id="students-tab-link"
              data-toggle="tab"
              href="#students"
              >Students</a
            >
          </li>
          <li class="nav-item">
            <a
              class="nav-link"
              id="mentors-tab-link"
              data-toggle="tab"
              href="#mentors"
              >Mentors</a
            >
          </li>
        </ul>

        <div class="tab-content">
          <!-- Students Tab Content -->
          <div
            class="tab-pane fade show active"
            id="students"
            role="tabpanel"
            aria-labelledby="students-tab-link"
          >
            <h2>Students</h2>
            <div class="table-container">
              <table class="table table-bordered" id="students-table">
                <thead>
                  <tr>
                    <th>Ref No</th>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Surname</th>
                    <th>DOB</th>
                    <th>Gender</th>
                    <th>School Attended</th>
                    <th>Grade Year</th>
                    <th>Stream</th>
                    <th>Potential Course</th>
                    <th>Mentor</th>
                    <th>Cell Number</th>
                    <th>Email Address</th>
                    <th>Applied For 2021</th>
                    <th>University Applied For</th>
                    <th>Field1</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>

          <!-- Mentors Tab Content -->
          <div
            class="tab-pane fade"
            id="mentors"
            role="tabpanel"
            aria-labelledby="mentors-tab-link"
          >
            <h2>Mentors</h2>
            <div class="table-container">
              <table class="table table-bordered" id="mentors-table">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Age</th>
                    <th>Phone Number</th>
                    <th>Origin</th>
                    <th>Home Language</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- Assessments Page -->
      <div id="assessments" class="tab-content" style="display: none">
        <div class="intro-container">
          <h2>Assessments</h2>
          <p>
            This section provides an overview of the assessments and evaluations
            that can be managed and reviewed. You can use this page to track and
            analyze various assessments.
          </p>
          <p>
            For more information, refer to the
            <a href="/docs/assessments" target="_blank">documentation</a>.
          </p>
        </div>
        <!-- Content here -->
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
      $(document).ready(function () {
        $("#students-table").DataTable();
        $("#mentors-table").DataTable();

        // Fetch and display initial data for students and mentors
        fetchTableData("students-table", "/students");
        fetchTableData("mentors-table", "/mentors");
      });

      function fetchTableData(tableId, url) {
        fetch(url)
          .then((response) => response.json())
          .then((data) => {
            const table = $(`#${tableId}`).DataTable();
            table.clear().draw();
            data.forEach((item, index) => {
              let rowData = Object.values(item);
              if (tableId === "students-table") {
                // Add buttons for actions column
                rowData.push(`<button class="btn btn-primary btn-sm" onclick="editItem('${url}', ${item.id})">Edit</button>
                <button class="btn btn-danger btn-sm" onclick="deleteItem('${url}', ${item.id})">Delete</button>`);
              } else if (tableId === "mentors-table") {
                // Add buttons for actions column
                rowData.push(`<button class="btn btn-primary btn-sm" onclick="editItem('${url}', ${item.id})">Edit</button>
                <button class="btn btn-danger btn-sm" onclick="deleteItem('${url}', ${item.id})">Delete</button>`);
              }
              table.row.add(rowData).draw();
            });
          })
          .catch((error) => console.error("Error fetching data:", error));
      }

      function editItem(url, id) {
        // Handle editing item
        console.log("Edit item:", id);
      }

      function deleteItem(url, id) {
        // Handle deleting item
        console.log("Delete item:", id);
      }

      function showDirectories() {
        document.getElementById("directories").style.display = "block";
        document.getElementById("assessments").style.display = "none";
      }

      function showAssessments() {
        document.getElementById("directories").style.display = "none";
        document.getElementById("assessments").style.display = "block";
      }
    </script>
  </body>
</html>
